% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/contrasts_api.R
\name{compute_lm_contrasts}
\alias{compute_lm_contrasts}
\title{Compute linear model contrast statistics (public API)}
\usage{
compute_lm_contrasts(
  B,
  XtXinv,
  df,
  sigma = NULL,
  sigma2 = NULL,
  contrasts = NULL,
  t_contrasts = NULL,
  f_contrasts = NULL,
  columns = NULL,
  output = c("stacked", "list"),
  robust_weights = NULL,
  ar_order = 0,
  drop_failed = TRUE
)
}
\arguments{
\item{B}{Numeric matrix (p x V) of coefficients.}

\item{XtXinv}{Numeric matrix (p x p), inverse cross-product of the design.}

\item{df}{Residual degrees of freedom.}

\item{sigma}{Optional numeric vector (length V) of residual std. dev.; ignored if \code{sigma2} provided.}

\item{sigma2}{Optional numeric vector (length V) of residual variances.}

\item{contrasts}{Optional named list mixing t- and F-contrasts; vectors are t, matrices are F.}

\item{t_contrasts}{Optional named list of numeric vectors (t-contrasts).}

\item{f_contrasts}{Optional named list of numeric matrices (F-contrasts).}

\item{columns}{Optional character vector (length p) naming coefficients; used for name matching.}

\item{output}{Either "stacked" (default; tibble) or "list" (raw list of tibbles).}

\item{robust_weights}{Optional numeric vector of robust weights or NULL. Used only for df adjustments.}

\item{ar_order}{Integer AR order; used only for effective df adjustments.}

\item{drop_failed}{Logical; drop contrasts that fail validation (default TRUE).}
}
\value{
A tibble with rows per contrast (default) or a named list if \code{output = "list"}.
}
\description{
A polished wrapper around the internal fast contrast engine. Accepts
name-based contrast specifications and returns a consistent tibble by default.
}
\details{
Inputs mirror a standard GLM contrast computation: provide \code{B} (p x V),
\code{XtXinv} (p x p), residual degrees of freedom \code{df}, and either \code{sigma} or
\code{sigma2} (per-voxel noise). Contrasts can be specified as a single mixed
\code{contrasts} list or separately as \code{t_contrasts} (vectors) and \code{f_contrasts}
(matrices). When contrast vectors/matrices are named (for vectors) or have
column names (for matrices), names are matched to \code{columns} to determine the
appropriate design indices; otherwise lengths must match the number of
parameters \code{p}.
}
