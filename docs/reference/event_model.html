<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function creates an event-based fMRI regression model, represented as a data structure."><title>Construct an event model — event_model • fmrireg</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Construct an event model — event_model"><meta property="og:description" content="This function creates an event-based fMRI regression model, represented as a data structure."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">fmrireg</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Overview.html">Overview</a>
    <a class="dropdown-item" href="../articles/a_01_hemodynamic_response.html">Hemodynamic Response Functions</a>
    <a class="dropdown-item" href="../articles/a_02_regressor.html">Building Regressors</a>
    <a class="dropdown-item" href="../articles/a_03_baseline_model.html">Baseline Model</a>
    <a class="dropdown-item" href="../articles/a_04_event_models.html">Event Models</a>
    <a class="dropdown-item" href="../articles/a_05_contrasts.html">Contrasts</a>
    <a class="dropdown-item" href="../articles/a_06_afni.html">Translating to AFNI 3dDeconvolve</a>
    <a class="dropdown-item" href="../articles/a_07_trialwise.html">Single Trial Beta Estimation</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bbuchsbaum/fmrireg/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Construct an event model</h1>
      <small class="dont-index">Source: <a href="https://github.com/bbuchsbaum/fmrireg/blob/HEAD/R/all_generic.R" class="external-link"><code>R/all_generic.R</code></a></small>
      <div class="d-none name"><code>event_model.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates an event-based fMRI regression model, represented as a data structure.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">event_model</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">block</span>,</span>
<span>  <span class="va">sampling_frame</span>,</span>
<span>  drop_empty <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  durations <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>The model specification, typically a <code>formula</code>. The formula should have the following format:
response ~ predictor1 + predictor2 + ... + predictorN
where <code>response</code> is a numeric vector of fMRI signal values, and <code>predictor1</code> to <code>predictorN</code> are
predictor variables. Each predictor variable should be specified as a function of categorical
variables (factors) and/or continuous variables. The functions should have the prefix "hrf", and can
be defined using the <code><a href="hrf.html">hrf()</a></code> function (see <code>hrf</code> documentation for details).</p></dd>


<dt>data</dt>
<dd><p>A data frame containing the experimental design, with one row per time point and
one column per variable used in the model formula. If a categorical variable is used in the formula,
it should be a factor in the data frame. The data frame should also contain a column with the fMRI
signal values (the response variable).</p></dd>


<dt>block</dt>
<dd><p>A formula specifying the block structure of the design. This formula should have
the format <code>block_var1 + block_var2 + ...</code>, where each <code>block_var</code> is a categorical variable (factor)
used to define blocks of time points. The block structure is used to estimate the baseline fMRI
signal level separately for each block.</p></dd>


<dt>sampling_frame</dt>
<dd><p>A sampling frame defining the temporal and block structure of the design.
This should be an object of class <code>sampling_frame</code> (see <code>sampling_frame</code> documentation for details).</p></dd>


<dt>drop_empty</dt>
<dd><p>Logical value indicating whether to drop empty factor levels in the model.
If <code>TRUE</code> (default), any factor levels with no observations will be dropped from the model. If <code>FALSE</code>,
empty levels will be retained and will receive a coefficient of zero in the model.</p></dd>


<dt>durations</dt>
<dd><p>A numeric vector specifying the duration (in seconds) of each event in the model.
If the model contains block variables, the duration of each block should be specified as well.
The length of this vector should be equal to the number of events/blocks in the design.
Default value is 0 (no duration).</p></dd>


<dt>...</dt>
<dd><p>Additional arguments to be passed to methods. Currently not used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list containing the following elements:</p>
<dl><dt>formula</dt>
<dd><p>The formula used to create the model.</p></dd>

<dt>design</dt>
<dd><p>The design matrix for the model, with one row per time point and one column per predictor variable.</p></dd>

<dt>block_indices</dt>
<dd><p>A list of indices defining the start and end time points of each block.</p></dd>

<dt>baseline</dt>
<dd><p>A vector containing the estimated baseline fMRI signal level for each block.</p></dd>

<dt>dur</dt>
<dd><p>A vector containing the duration (in seconds) of each event or block in the design.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create a data frame with experimental design</span></span></span>
<span class="r-in"><span><span class="va">event_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>fac<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>, onsets<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span>,<span class="fl">20</span>,<span class="fl">80</span><span class="op">)</span>, run<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a sampling frame with 50-second blocks and a TR of 2 seconds</span></span></span>
<span class="r-in"><span><span class="va">sframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="sampling_frame.html">sampling_frame</a></span><span class="op">(</span>blocklens<span class="op">=</span><span class="fl">50</span>, TR<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create an event model using the `onsets` variable as a predictor, with a separate baseline for each run</span></span></span>
<span class="r-in"><span><span class="va">evmodel</span> <span class="op">&lt;-</span> <span class="fu">fmri_event_model</span><span class="op">(</span><span class="va">response</span> <span class="op">~</span> <span class="fu"><a href="hrf.html">hrf</a></span><span class="op">(</span><span class="va">onsets</span><span class="op">)</span>, data<span class="op">=</span><span class="va">event_data</span>, block<span class="op">=</span><span class="op">~</span><span class="va">run</span>, sampling_frame<span class="op">=</span><span class="va">sframe</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in fmri_event_model(response ~ hrf(onsets), data = event_data, block = ~run,     sampling_frame = sframe):</span> could not find function "fmri_event_model"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://linguamemoria.org" class="external-link">Bradley Buchsbaum</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

