<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get term indices from a model or term — correlation_map • fmrireg</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get term indices from a model or term — correlation_map"><meta name="description" content="Get the indices that map between model terms and their corresponding columns in the
design matrix. These indices are essential for:
Extracting coefficients for specific terms
Computing contrasts for specific model components
Mapping between event terms and baseline terms
Identifying which design matrix columns belong to which terms


Extract the unique elements from a term or variable in their natural order. For
categorical variables (factors), this returns the factor levels. For continuous
variables, this returns the unique values in ascending order. For event terms with
multiple variables, this returns the combined elements.
Generate a correlation heatmap showing the relationships between columns in a design
matrix. This visualization helps identify potential collinearity between regressors
in the model. For event models, it shows correlations between different conditions.
For baseline models, it shows correlations between drift and nuisance terms."><meta property="og:description" content="Get the indices that map between model terms and their corresponding columns in the
design matrix. These indices are essential for:
Extracting coefficients for specific terms
Computing contrasts for specific model components
Mapping between event terms and baseline terms
Identifying which design matrix columns belong to which terms


Extract the unique elements from a term or variable in their natural order. For
categorical variables (factors), this returns the factor levels. For continuous
variables, this returns the unique values in ascending order. For event terms with
multiple variables, this returns the combined elements.
Generate a correlation heatmap showing the relationships between columns in a design
matrix. This visualization helps identify potential collinearity between regressors
in the model. For event models, it shows correlations between different conditions.
For baseline models, it shows correlations between drift and nuisance terms."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fmrireg</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/Overview.html">Package Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Topics</h6></li>
    <li><a class="dropdown-item" href="../articles/a_05_contrasts.html">Contrasts</a></li>
    <li><a class="dropdown-item" href="../articles/a_08_simulation.html">Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/a_09_linear_model.html">Linear Modeling</a></li>
    <li><a class="dropdown-item" href="../articles/a_10_dataset.html">Dataset Management</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Resources</h6></li>
    <li><a class="dropdown-item" href="../articles/benchmark_datasets.html">Benchmark Datasets</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://github.com/bbuchsbaum/fmrireg/releases/tag/v0.1.0">Version 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bbuchsbaum/fmrireg/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get term indices from a model or term</h1>
      <small class="dont-index">Source: <a href="https://github.com/bbuchsbaum/fmrireg/blob/HEAD/R/all_generic.R" class="external-link"><code>R/all_generic.R</code></a>, <a href="https://github.com/bbuchsbaum/fmrireg/blob/HEAD/R/fmri_model.R" class="external-link"><code>R/fmri_model.R</code></a></small>
      <div class="d-none name"><code>design_matrix.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Get the indices that map between model terms and their corresponding columns in the
design matrix. These indices are essential for:</p><ul><li><p>Extracting coefficients for specific terms</p></li>
<li><p>Computing contrasts for specific model components</p></li>
<li><p>Mapping between event terms and baseline terms</p></li>
<li><p>Identifying which design matrix columns belong to which terms</p></li>
</ul><p>Extract the unique elements from a term or variable in their natural order. For
categorical variables (factors), this returns the factor levels. For continuous
variables, this returns the unique values in ascending order. For event terms with
multiple variables, this returns the combined elements.</p>
<p>Generate a correlation heatmap showing the relationships between columns in a design
matrix. This visualization helps identify potential collinearity between regressors
in the model. For event models, it shows correlations between different conditions.
For baseline models, it shows correlations between drift and nuisance terms.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">correlation_map</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'convolved_term'</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/design_matrix.html" class="external-link">design_matrix</a></span><span class="op">(</span><span class="va">x</span>, blockid <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'fmri_model'</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/design_matrix.html" class="external-link">design_matrix</a></span><span class="op">(</span><span class="va">x</span>, blockid <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>The model object (event_model, baseline_model, or fmri_model)</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to methods. Common arguments include:</p><dl><dt>method</dt>
<dd><p>Correlation method ("pearson" or "spearman")</p></dd>

<dt>half_matrix</dt>
<dd><p>Logical; if TRUE, show only lower triangle</p></dd>

<dt>absolute_limits</dt>
<dd><p>Logical; if TRUE, set color limits to [-1,1]</p></dd>


</dl></dd>


<dt id="arg-blockid">blockid<a class="anchor" aria-label="anchor" href="#arg-blockid"></a></dt>
<dd><p>Numeric vector specifying which blocks/runs to include (optional)</p></dd>


<dt id="arg-allrows">allrows<a class="anchor" aria-label="anchor" href="#arg-allrows"></a></dt>
<dd><p>Logical; if TRUE, return all rows including those with no events (default: FALSE)</p></dd>


<dt id="arg-drop-empty">drop.empty<a class="anchor" aria-label="anchor" href="#arg-drop-empty"></a></dt>
<dd><p>Logical; if TRUE, drop empty conditions (default: TRUE)</p></dd>


<dt id="arg-what">what<a class="anchor" aria-label="anchor" href="#arg-what"></a></dt>
<dd><p>Character; what to extract - "unique" for unique values or "all" for all values (default: "unique")</p></dd>


<dt id="arg-transformed">transformed<a class="anchor" aria-label="anchor" href="#arg-transformed"></a></dt>
<dd><p>Logical; if TRUE, return transformed values (default: FALSE)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named list where each element contains the column indices in the design matrix
corresponding to that term. For example:</p><ul><li><p>For event terms: Indices for each experimental condition</p></li>
<li><p>For baseline terms: Indices for drift and block terms</p></li>
<li><p>For convolved terms: Indices for each basis function</p></li>
</ul><p>A tibble containing the design matrix, where:</p><ul><li><p>Rows represent time points (scans)</p></li>
<li><p>Columns represent predictor variables</p></li>
<li><p>Column names indicate the condition or regressor (see Details)</p></li>
</ul><p>A vector containing the ordered elements:</p><ul><li><p>For factors: The factor levels in their defined order</p></li>
<li><p>For numeric variables: Unique values in ascending order</p></li>
<li><p>For event terms: Combined elements from all variables</p></li>
</ul><p>A ggplot2 object containing the correlation heatmap, where:</p><ul><li><p>Rows and columns represent model terms</p></li>
<li><p>Colors indicate correlation strength (-1 to 1)</p></li>
<li><p>Darker colors indicate stronger correlations</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="column-naming-post-refactor-">Column Naming (Post-Refactor)<a class="anchor" aria-label="anchor" href="#column-naming-post-refactor-"></a></h3>


<p>As of version X.Y.Z, column names in the final design matrix generated by
<code>event_model</code> follow the structure:
<code>term_tag</code> + <code>_</code> + <code>condition_tag</code> + <code>_b##</code> basis suffix</p>
<p>Refer to <code>event_model</code> documentation for details on <code>term_tag</code> and <code>condition_tag</code> generation.
The <code>design_matrix</code> methods for individual term types (like <code>design_matrix.event_term</code>)
return unconvolved predictors whose names may <em>not</em> yet follow this final structure.
The final naming is applied by <code>convolve.event_term</code> and assembled by
<code>build_event_model_design_matrix</code>.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/fmridesign/man/event_terms.html" class="external-link">event_terms()</a></code>, <code><a href="https://rdrr.io/pkg/fmridesign/man/baseline_terms.html" class="external-link">baseline_terms()</a></code>, <code><a href="https://rdrr.io/pkg/fmridesign/man/design_matrix.html" class="external-link">design_matrix()</a></code>
design_matrix</p>
<p>Extract or construct the design matrix from a model term or object. The design matrix
contains the predictor variables used in the model, with one row per time point and
one column per predictor. For event-related designs, the design matrix typically
contains the convolved HRF responses. For baseline terms, it contains drift and
nuisance regressors.</p>
<p><code><a href="https://rdrr.io/pkg/fmridesign/man/event_model.html" class="external-link">event_model()</a></code>, <code><a href="https://rdrr.io/pkg/fmridesign/man/baseline_model.html" class="external-link">baseline_model()</a></code>, <code><a href="fmri_model.html">fmri_model()</a></code>
elements</p>
<p>Return the ordered elements of a term or variable.</p>
<p><code><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels()</a></code>, <code><a href="https://rdrr.io/pkg/fmridesign/man/event_term.html" class="external-link">event_term()</a></code>
correlation_map</p>
<p>Create a correlation heatmap for an fMRI design matrix.</p>
<p><code><a href="https://rdrr.io/pkg/fmridesign/man/event_model.html" class="external-link">event_model()</a></code>, <code><a href="https://rdrr.io/pkg/fmridesign/man/baseline_model.html" class="external-link">baseline_model()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create a model with multiple terms</span></span></span>
<span class="r-in"><span><span class="va">event_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  stimulus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"face"</span>, <span class="st">"house"</span>, <span class="st">"face"</span>, <span class="st">"house"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  rt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.2</span>, <span class="fl">0.9</span>, <span class="fl">1.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  onsets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  run <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create sampling frame</span></span></span>
<span class="r-in"><span><span class="va">sframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://bbuchsbaum.github.io/fmrihrf/reference/sampling_frame.html" class="external-link">sampling_frame</a></span><span class="op">(</span>blocklens <span class="op">=</span> <span class="fl">50</span>, TR <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create event model with multiple terms</span></span></span>
<span class="r-in"><span><span class="va">evmodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/event_model.html" class="external-link">event_model</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">onsets</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/hrf.html" class="external-link">hrf</a></span><span class="op">(</span><span class="va">stimulus</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/hrf.html" class="external-link">hrf</a></span><span class="op">(</span><span class="va">rt</span>, basis <span class="op">=</span> <span class="st">"fourier"</span>, nbasis <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">event_data</span>,</span></span>
<span class="r-in"><span>  block <span class="op">=</span> <span class="op">~</span><span class="va">run</span>,</span></span>
<span class="r-in"><span>  sampling_frame <span class="op">=</span> <span class="va">sframe</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get indices for each term</span></span></span>
<span class="r-in"><span><span class="va">indices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/term_indices.html" class="external-link">term_indices</a></span><span class="op">(</span><span class="va">evmodel</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in UseMethod("term_indices"):</span> no applicable method for 'term_indices' applied to an object of class "c('event_model', 'list')"</span>
<span class="r-in"><span><span class="co"># Returns list with:</span></span></span>
<span class="r-in"><span><span class="co">#  - Indices for stimulus conditions</span></span></span>
<span class="r-in"><span><span class="co">#  - Indices for rt basis functions</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create full model with baseline</span></span></span>
<span class="r-in"><span><span class="va">bmodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/baseline_model.html" class="external-link">baseline_model</a></span><span class="op">(</span>basis <span class="op">=</span> <span class="st">"bs"</span>, degree <span class="op">=</span> <span class="fl">3</span>, sframe <span class="op">=</span> <span class="va">sframe</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fmodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="fmri_model.html">fmri_model</a></span><span class="op">(</span><span class="va">evmodel</span>, <span class="va">bmodel</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(assertion, env):</span> argument "dataset" is missing, with no default</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get indices for full model</span></span></span>
<span class="r-in"><span><span class="va">full_indices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/term_indices.html" class="external-link">term_indices</a></span><span class="op">(</span><span class="va">fmodel</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'fmodel' not found</span>
<span class="r-in"><span><span class="co"># Returns indices for both event and baseline terms</span></span></span>
<span class="r-in"><span><span class="co"># Create event terms with different types</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Categorical variable</span></span></span>
<span class="r-in"><span><span class="va">event_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="st">"A"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  onsets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  run <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cat_term</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/event_term.html" class="external-link">event_term</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>condition <span class="op">=</span> <span class="va">event_data</span><span class="op">$</span><span class="va">condition</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  onsets <span class="op">=</span> <span class="va">event_data</span><span class="op">$</span><span class="va">onsets</span>,</span></span>
<span class="r-in"><span>  blockids <span class="op">=</span> <span class="va">event_data</span><span class="op">$</span><span class="va">run</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/elements.html" class="external-link">elements</a></span><span class="op">(</span><span class="va">cat_term</span><span class="op">)</span>  <span class="co"># Returns: c("B", "A")</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $condition</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      condition</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Continuous variable</span></span></span>
<span class="r-in"><span><span class="va">event_data</span><span class="op">$</span><span class="va">rt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.2</span>, <span class="fl">0.8</span>, <span class="fl">1.1</span>, <span class="fl">0.9</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cont_term</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/event_term.html" class="external-link">event_term</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rt <span class="op">=</span> <span class="va">event_data</span><span class="op">$</span><span class="va">rt</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  onsets <span class="op">=</span> <span class="va">event_data</span><span class="op">$</span><span class="va">onsets</span>,</span></span>
<span class="r-in"><span>  blockids <span class="op">=</span> <span class="va">event_data</span><span class="op">$</span><span class="va">run</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/elements.html" class="external-link">elements</a></span><span class="op">(</span><span class="va">cont_term</span><span class="op">)</span>  <span class="co"># Returns: c(0.8, 0.9, 1.1, 1.2)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       rt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 1.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># Create event data</span></span></span>
<span class="r-in"><span><span class="va">event_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"face"</span>, <span class="st">"house"</span>, <span class="st">"face"</span>, <span class="st">"house"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  rt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.2</span>, <span class="fl">0.9</span>, <span class="fl">1.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  onsets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  run <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create sampling frame</span></span></span>
<span class="r-in"><span><span class="va">sframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://bbuchsbaum.github.io/fmrihrf/reference/sampling_frame.html" class="external-link">sampling_frame</a></span><span class="op">(</span>blocklens <span class="op">=</span> <span class="fl">50</span>, TR <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create event model</span></span></span>
<span class="r-in"><span><span class="va">evmodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/event_model.html" class="external-link">event_model</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">onsets</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/hrf.html" class="external-link">hrf</a></span><span class="op">(</span><span class="va">condition</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/hrf.html" class="external-link">hrf</a></span><span class="op">(</span><span class="va">rt</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">event_data</span>,</span></span>
<span class="r-in"><span>  block <span class="op">=</span> <span class="op">~</span><span class="va">run</span>,</span></span>
<span class="r-in"><span>  sampling_frame <span class="op">=</span> <span class="va">sframe</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot correlation map for event model</span></span></span>
<span class="r-in"><span><span class="fu">correlation_map</span><span class="op">(</span><span class="va">evmodel</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in UseMethod("correlation_map"):</span> no applicable method for 'correlation_map' applied to an object of class "c('event_model', 'list')"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create baseline model</span></span></span>
<span class="r-in"><span><span class="va">bmodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fmridesign/man/baseline_model.html" class="external-link">baseline_model</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  basis <span class="op">=</span> <span class="st">"bs"</span>,</span></span>
<span class="r-in"><span>  degree <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sframe <span class="op">=</span> <span class="va">sframe</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot correlation map for baseline model</span></span></span>
<span class="r-in"><span><span class="fu">correlation_map</span><span class="op">(</span><span class="va">bmodel</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in UseMethod("correlation_map"):</span> no applicable method for 'correlation_map' applied to an object of class "c('baseline_model', 'list')"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create full model and plot combined correlations</span></span></span>
<span class="r-in"><span><span class="va">fmodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="fmri_model.html">fmri_model</a></span><span class="op">(</span><span class="va">evmodel</span>, <span class="va">bmodel</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(assertion, env):</span> argument "dataset" is missing, with no default</span>
<span class="r-in"><span><span class="fu">correlation_map</span><span class="op">(</span><span class="va">fmodel</span>, method <span class="op">=</span> <span class="st">"pearson"</span>, half_matrix <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'fmodel' not found</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/bbuchsbaum" class="external-link">Bradley Buchsbaum</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

